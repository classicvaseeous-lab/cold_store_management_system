{% extends "base.html" %}
{% block title %}Employees â€” ColdStore{% endblock %}
{% block content %}

<div class="max-w-6xl mx-auto space-y-6">

  <div class="card flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
    <div>
      <h2 class="text-xl font-semibold">ðŸ‘¥ Employees</h2>
      <p class="text-sm text-slate-500 dark:text-slate-400">Manage staff profiles and details.</p>
    </div>

    <div class="flex flex-col sm:flex-row gap-2 sm:items-center">
      <form method="get" class="flex gap-2">
        <input name="q" value="{{ q }}" placeholder="Search name/phone/email..." class="form-control w-64" />
        <button class="btn-primary">Search</button>
        <a href="{% url 'employees_list' %}" class="btn-secondary">Reset</a>
      </form>

      <a href="{% url 'employee_add' %}" class="btn-primary">+ Add Employee</a>
      <a href="{% url 'attendance_dashboard' %}" class="btn-secondary">Attendance</a>
    </div>
  </div>

  <div class="bg-white dark:bg-slate-900 rounded-2xl shadow border border-slate-200 dark:border-slate-800 overflow-x-auto">
    <table class="min-w-full text-sm">
      <thead class="bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-xs uppercase">
        <tr>
          <th class="p-3 text-left">Employee</th>
          <th class="p-3 text-left">Phone</th>
          <th class="p-3 text-left">SSNIT</th>
          <th class="p-3 text-right">Salary</th>
          <th class="p-3 text-center">Actions</th>
        </tr>
      </thead>

      <tbody class="divide-y divide-slate-100 dark:divide-slate-700">
        {% for e in employees %}
        <tr class="hover:bg-slate-50 dark:hover:bg-slate-800 transition">
          <td class="p-3">
            <div class="flex items-center gap-3">
              {% if e.photo %}
                <img src="{{ e.photo.url }}" class="w-10 h-10 rounded object-cover" />
              {% else %}
                <div class="w-10 h-10 rounded bg-slate-200 dark:bg-slate-700 flex items-center justify-center">ðŸ‘¤</div>
              {% endif %}
              <div>
                <div class="font-medium text-slate-800 dark:text-slate-100">{{ e.full_name }}</div>
                <div class="text-xs text-slate-500 dark:text-slate-400">
                  {{ e.user.username }}{% if e.user.email %} â€¢ {{ e.user.email }}{% endif %}
                </div>
              </div>
            </div>
          </td>

          <td class="p-3 text-slate-700 dark:text-slate-200">{{ e.phone|default:"â€”" }}</td>
          <td class="p-3 text-slate-700 dark:text-slate-200">{{ e.ssnit_number|default:"â€”" }}</td>
          <td class="p-3 text-right text-slate-800 dark:text-slate-100">â‚µ{{ e.salary|floatformat:2 }}</td>

          <td class="p-3 text-center">
            <div class="inline-flex items-center gap-2">
              <a href="{% url 'employee_edit' e.pk %}" class="text-indigo-600 dark:text-indigo-400 hover:underline">Edit</a>
              <a href="{% url 'employee_delete' e.pk %}" class="text-red-600 hover:underline">Delete</a>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="p-6 text-center text-slate-500 dark:text-slate-400">No employees yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>

{% endblock %}
