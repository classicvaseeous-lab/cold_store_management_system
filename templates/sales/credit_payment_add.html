{% extends "base.html" %}
{% load form_filters %}
{% block title %}Receive Payment — Credit Sale{% endblock %}
{% block content %}

<div class="max-w-2xl mx-auto space-y-6">

  <div class="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-6 shadow">
    <h2 class="text-2xl font-bold text-slate-800 dark:text-slate-100">✅ Receive Credit Payment</h2>
    <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">
      Sale #{{ sale.id }} • Customer: {{ sale.customer_name|default:"Walk-in Customer" }}
    </p>

    <div class="mt-4 grid grid-cols-1 sm:grid-cols-3 gap-3">
      <div class="rounded-xl border border-slate-200 dark:border-slate-800 p-4">
        <div class="text-xs uppercase text-slate-500 dark:text-slate-400">Total</div>
        <div class="text-lg font-semibold">₵{{ sale.total_amount|floatformat:2 }}</div>
      </div>
      <div class="rounded-xl border border-slate-200 dark:border-slate-800 p-4">
        <div class="text-xs uppercase text-slate-500 dark:text-slate-400">Paid</div>
        <div class="text-lg font-semibold text-green-600">₵{{ sale.amount_paid|floatformat:2 }}</div>
      </div>
      <div class="rounded-xl border border-slate-200 dark:border-slate-800 p-4">
        <div class="text-xs uppercase text-slate-500 dark:text-slate-400">Balance</div>
        <div class="text-lg font-semibold text-red-600">₵{{ sale.balance_due|floatformat:2 }}</div>
      </div>
    </div>

    <form method="post" class="mt-6 space-y-4">
      {% csrf_token %}

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm text-slate-600 dark:text-slate-300 mb-1">Amount (₵)</label>
          {{ form.amount|add_class:"form-control" }}
        </div>
        <div>
          <label class="block text-sm text-slate-600 dark:text-slate-300 mb-1">Payment Method</label>
          {{ form.payment_method|add_class:"form-control" }}
        </div>
      </div>

      <div>
        <label class="block text-sm text-slate-600 dark:text-slate-300 mb-1">Reference (optional)</label>
        {{ form.reference|add_class:"form-control" }}
      </div>

      <div class="flex flex-col sm:flex-row gap-2">
        <button class="btn-primary w-full sm:w-auto">Save Payment</button>
        <a href="{% url 'credit_sales_list' %}" class="btn-secondary w-full sm:w-auto">Cancel</a>
      </div>
    </form>
  </div>

</div>

{% endblock %}
